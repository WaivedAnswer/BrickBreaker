//ReadyState.cpp
#include "ReadyState.h"
#include "PlayState.h"
#include "commonSDL.h"
#include "common.h"
ReadyState::ReadyState()
{
}

ReadyState::~ReadyState()
{
}

void ReadyState::Init()
{
	if(m_readyText == nullptr)
	{
		m_readyText = new LTexture();
	}
	SDL_Color color = { 255, 255, 255 };
	if( !m_readyText->loadFromRenderedText( "Press Enter to Start!", color ))
	{
		printf( "Failed to render text texture!\n" );
		return;
	}
}
void ReadyState::Cleanup()
{
	if(m_readyText != nullptr)
	{
		delete m_readyText;
		m_readyText == nullptr;
	}
}

void ReadyState::Pause()
{
}
void ReadyState::Resume()
{
}

void ReadyState::Update(GameEngine* game)
{
}

void ReadyState::Draw(GameEngine* game)
{
	if(m_readyText == nullptr)
	{
		return;
	}

	m_readyText->render( ( SCREEN_WIDTH - m_readyText->getWidth() )/2 , ( SCREEN_HEIGHT - m_readyText->getHeight() )/2 );
}
void ReadyState::HandleInput(GameEngine* game)
{
	SDL_Event e;
	while( SDL_PollEvent( &e ) != 0 )
	{
		//User requests quit
		if( e.type == SDL_QUIT )
		{
			game->Quit();
		}
		else if (e.type == SDL_KEYDOWN)
		{
			switch( e.key.keysym.sym ) 
			{
				case SDLK_RETURN:
					ChangeState(game, new PlayState());
					break;
			}
		}

	}
}


